#!/usr/bin/env python3

"""tests for ini6.py"""

import os
import re
from subprocess import getstatusoutput

prg = '../ini6.py'
bad_string = """We tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried ZenWe tried list and we tried dicts also we tried Zen"""
good_string = 'We tried list and we tried dicts also we tried Zen'

# --------------------------------------------------
def test_exists():
    """Exists"""

    assert os.path.isfile(prg)


# --------------------------------------------------
def test_usage():
    """Usage"""

    for flag in ['-h', '--help']:
        rv, out = getstatusoutput(f'{prg} {flag}')
        assert rv == 0
        assert re.match("usage", out, re.IGNORECASE)


# --------------------------------------------------
def test_no_args():
    """Output when no args are provided"""

    rv, out = getstatusoutput(f'{prg}')
    assert rv != 0
    error_string = 'following arguments are required: str'
    assert re.findall(error_string, out, re.IGNORECASE)


# --------------------------------------------------
def test_bad_string():
    """Test output with bad string, >10000 characters"""

    rv, out = getstatusoutput(f'{prg} "{bad_string}"')
    assert rv != 0
    error_string = 'LengthStringError: Lenght of string must be less than 10000'
    assert re.findall(error_string, out, re.IGNORECASE)


# --------------------------------------------------
def test_good_string():
    """Output when no args are provided"""

    rv, out = getstatusoutput(f'{prg} "{good_string}"')
    # assert "\n" in out
    assert out.count("\n") > 2


# --------------------------------------------------
